<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="/path/to/your/css">
    <style>
        .eyeIcon {
            cursor: pointer;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }
        .inputContainer {
            position: relative;
            margin-bottom: 1rem;
        }
        .inputField {
            padding-right: 2rem; /* Space for the SVG icon */
            width: 100%;
        }
        .inputIcon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }
        .error {
            color: red;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <%- include("navbar.ejs") %>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <form id="registrationForm" action="/save_user" method="post" class="form_main" onsubmit="return validateForm()">
                    <p class="heading mb-5">Registration</p>
                    
                    <!-- Username Field -->
                    <div class="inputContainer">
                        <svg class="inputIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16">
                            <path d="M14 1h-4v1h3v11H3V2h3V1H2v14h12V1zM8 5c1.105 0 2-.895 2-2S9.105 1 8 1 6 1.895 6 3s.895 2 2 2zm1.5 1h-3C4.45 6 3 7.45 3 9.5v1.364c0 .616.498 1.136 1.114 1.136h7.773c.615 0 1.113-.52 1.113-1.136V9.5C13 7.45 11.55 6 9.5 6z"/>
                        </svg>
                        <input type="text" class="inputField" name="std_username" id="fullname" placeholder="First & Last name" required>
                    </div>

                    <!-- Mobile Field -->
                    <div class="inputContainer">
                        <svg class="inputIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16" fill="#2e2e2e">
                            <path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"/>
                        </svg>
                        <input type="text" class="inputField" name="std_mobile" id="mobile" placeholder="Mobile No" required>
                        <div id="mobileError" class="error"></div>
                    </div>

                    <!-- Email Field -->
                    <div class="inputContainer">
                        <svg class="inputIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16">
                            <path d="M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914z"></path>
                        </svg>
                        <input type="email" class="inputField" name="std_email" id="email" placeholder="Email id" required>
                    </div>

                    <!-- Password Field -->
                    <div class="inputContainer">
                        <svg class="inputIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16">
                            <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
                        </svg>
                        <input type="password" class="inputField" name="std_password" id="password" placeholder="Password" required>
                        <svg class="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16" onclick="togglePassword('password')">
                            <path d="M1.173 8c.882 1.598 2.75 4 6.827 4 4.077 0 5.945-2.402 6.827-4-.882-1.598-2.75-4-6.827-4-4.077 0-5.945 2.402-6.827 4zM8 12c-3.314 0-5.513-2.314-6.707-4C2.487 5.314 4.686 3 8 3c3.314 0 5.513 2.314 6.707 4C13.513 9.686 11.314 12 8 12zM8 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0 1a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"></path>
                        </svg>
                    </div>

                    <!-- Confirm Password Field -->
                    <div class="inputContainer">
                        <svg class="inputIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16">
                            <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
                        </svg>
                        <input type="password" class="inputField" name="std_confipassword" id="confirmpassword" placeholder="Confirm Password" required>

                        <svg class="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#2e2e2e" viewBox="0 0 16 16" onclick="togglePassword('confirmpassword')">
                            <path d="M1.173 8c.882 1.598 2.75 4 6.827 4 4.077 0 5.945-2.402 6.827-4-.882-1.598-2.75-4-6.827-4-4.077 0-5.945 2.402-6.827 4zM8 12c-3.314 0-5.513-2.314-6.707-4C2.487 5.314 4.686 3 8 3c3.314 0 5.513 2.314 6.707 4C13.513 9.686 11.314 12 8 12zM8 5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0 1a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"></path>
                        </svg>
                        <div id="passwordError" class="error-message"></div>

                    </div>

                    <button id="button" class="btn w-100" type="submit">Submit</button>
                    <a class="forgotLink1" href="/login"><h6 class="text-primary">LOG IN</h6></a>
                </form>
            </div>
        </div>
    </div>

    <script>
      function togglePassword(id) {
          const field = document.getElementById(id);
          const type = field.getAttribute('type') === 'password' ? 'text' : 'password';
          field.setAttribute('type', type);
      }
  
      function validateForm() {
          const mobile = document.getElementById('mobile').value;
          const password = document.getElementById('password').value;
          const confirmPassword = document.getElementById('confirmpassword').value;
          const mobileError = document.getElementById('mobileError');
          const passwordError = document.getElementById('passwordError');
  
          // Reset errors
          mobileError.textContent = '';
          passwordError.textContent = '';
  
          // Validate mobile number
          if (!/^\d{10}$/.test(mobile)) {
              mobileError.textContent = 'Please enter a valid 10-digit mobile number.';
              return false;
          }
  
          // Check for common invalid mobile number patterns
          if (/^(1234567890|0987654321|9898989898)$/.test(mobile)) {
              mobileError.textContent = 'This mobile number is not valid.';
              return false;
          }
  
          // Validate password strength
          const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
          if (!passwordPattern.test(password)) {
              passwordError.textContent = 'Password must be at least 8 characters long and include letters, numbers, and special symbols.';
              return false;
          }
  
          // Check if passwords match
          if (password !== confirmPassword) {
              passwordError.textContent = 'Passwords do not match.';
              return false;
          }
  
          return true; // Allow form submission if all validations pass
      }
  </script>
  
</body>
</html>
